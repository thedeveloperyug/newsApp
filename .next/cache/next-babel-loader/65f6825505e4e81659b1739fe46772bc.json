{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport Head from 'next/head';\nimport { useRouter } from 'next/router';\nimport styles from '../../styles/Feed.module.css';\nimport { Toolbar } from '../../components/toolbar';\nexport const Feed = ({\n  articles,\n  pageNumber\n}) => {\n  var _articles$, _articles$2, _articles$3;\n\n  const router = useRouter();\n  return articles.length ? /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"meta\", {\n        property: \"og:image\",\n        content: (_articles$ = articles[0]) === null || _articles$ === void 0 ? void 0 : _articles$.urlToImage\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        property: \"og:description\",\n        content: (_articles$2 = articles[0]) === null || _articles$2 === void 0 ? void 0 : _articles$2.description\n      }), /*#__PURE__*/_jsx(\"meta\", {\n        property: \"og:title\",\n        content: ((_articles$3 = articles[0]) === null || _articles$3 === void 0 ? void 0 : _articles$3.title) + ' and more!'\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"page-container\",\n      children: [/*#__PURE__*/_jsx(Toolbar, {}), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.main,\n        children: articles.map((article, index) => /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.post,\n          children: [/*#__PURE__*/_jsx(\"h1\", {\n            onClick: () => window.location.href = article.url,\n            children: article.title\n          }), /*#__PURE__*/_jsx(\"p\", {\n            children: article.description\n          }), !!article.urlToImage && /*#__PURE__*/_jsx(\"img\", {\n            src: article.urlToImage\n          })]\n        }, index))\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.paginator,\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: pageNumber === 1 ? styles.disabled : styles.active,\n          onClick: () => {\n            if (pageNumber > 1) {\n              // As of the current version of Next.js the default behavior for router.push\n              // will leave the scroll where it is, so we have to manually call scrollTo.\n              // This however is being worked on and is fixed in canary.\n              // Show this in tutorial vid:\n              // https://github.com/vercel/next.js/issues/3249\n              router.push(`/feed/${pageNumber - 1}`).then(() => window.scrollTo(0, 0));\n            }\n          },\n          children: \"Previous Page\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          children: [\"#\", pageNumber]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: pageNumber === 5 ? styles.disabled : styles.active,\n          onClick: () => {\n            if (pageNumber < 5) {\n              // As of the current version of Next.js the default behavior for router.push\n              // will leave the scroll where it is, so we have to manually call scrollTo.\n              // This however is being worked on and is fixed in canary.\n              // Show this in tutorial vid:\n              // https://github.com/vercel/next.js/issues/3249\n              router.push(`/feed/${pageNumber + 1}`).then(() => window.scrollTo(0, 0));\n            }\n          },\n          children: \"Next Page\"\n        })]\n      })]\n    })]\n  }) : /*#__PURE__*/_jsxs(\"div\", {\n    className: \"page-container\",\n    children: [/*#__PURE__*/_jsx(Toolbar, {}), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.main,\n      children: /*#__PURE__*/_jsx(\"h1\", {\n        children: \"Oops! No articles for this page\"\n      })\n    })]\n  });\n};\nexport const getServerSideProps = async pageContext => {\n  const pageNumber = pageContext.query.slug;\n\n  if (!pageNumber || pageNumber < 1 || pageNumber > 5) {\n    return {\n      props: {\n        articles: [],\n        pageNumber: 1\n      }\n    };\n  }\n\n  const apiResponse = await fetch( // https://newsapi.org/v2/top-headlines?country=us&category=business&apiKey=API_KEY\n  `https://newsapi.org/v2/top-headlines?country=us&pageSize=5&page=${pageNumber}`, {\n    headers: {\n      Authorization: `Bearer ${process.env.NEXT_PUBLIC_NEWS_KEY}`\n    }\n  }).then(res => res.json());\n  const {\n    articles\n  } = apiResponse;\n  return {\n    props: {\n      articles: articles,\n      pageNumber: Number.parseInt(pageNumber)\n    }\n  };\n};\nexport default Feed;","map":null,"metadata":{},"sourceType":"module"}